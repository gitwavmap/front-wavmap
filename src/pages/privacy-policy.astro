---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import * as m from '../paraglide/messages.js';
import Count from '../assets/images/count_img_white.svg';
---

<Layout title={`Privacy Policy - Wavmap`} description="Privacy Policy - Wavmap Platform">
  <Navbar currentPage="privacy" />
  <main class="container">
    <div id="parallax-container" class="flex flex-row">
      <!-- Column 1 -->
      <div class="flex-1 parallax-column" data-speed="3">
        <div class="column-content">
          <p class="xtra-large">PRIVACY POLICY</p>

          <div class="section-container flex">
            <div class="count">
              <img src={Count.src} alt="" />
              <p>001</p>
            </div>
            <div>
              <p class="large">Introduction</p>
              <p class="text-base">
                WavMap ("we", "us", or "our") operates the website wavmap.org (the "Service"). This Privacy Policy explains how we collect, use, and protect your personal information in compliance with the General Data Protection Regulation (GDPR) and applicable data protection laws.
              </p>
            </div>
          </div>

          <div class="separator" />

          <div class="section-container flex">
            <div class="count">
              <img src={Count.src} alt="" />
              <p>002</p>
            </div>
            <div>
              <p class="large">Data Controller</p>
              <p class="text-base">
                The data controller responsible for your personal data is:
              </p>
              <p class="text-base">
                Website: wavmap.org<br />
                Contact: contact@wavmap.org
              </p>
            </div>
          </div>

          <div class="separator" />

          <div class="section-container flex">
            <div class="count">
              <img src={Count.src} alt="" />
              <p>003</p>
            </div>
            <div>
              <p class="large">Information We Collect</p>
              <p class="text-base">
                We collect the following personal information when you register on our Service:
              </p>
              <p class="text-base">
                <strong>Email address:</strong> Used for authentication and optional newsletter communications<br />
                <strong>First name and last name:</strong> Used for account personalization
              </p>
              <p class="text-base">
                We do not publicly display your first name or last name on the Service.
              </p>
            </div>
          </div>

          <div class="separator" />

          <div class="section-container flex">
            <div class="count">
              <img src={Count.src} alt="" />
              <p>004</p>
            </div>
            <div>
              <p class="large">Legal Basis for Processing (GDPR)</p>
              <p class="text-base">
                We process your personal data under the following legal bases:
              </p>
              <p class="text-base">
                <strong>Consent:</strong> When you sign up for our newsletter<br />
                <strong>Contractual necessity:</strong> To provide you with access to your account and the Service<br />
                <strong>Legitimate interest:</strong> To maintain and improve our Service
              </p>
            </div>
          </div>

          <div class="separator" />

          <div class="section-container flex">
            <div class="count">
              <img src={Count.src} alt="" />
              <p>005</p>
            </div>
            <div>
              <p class="large">How We Use Your Information</p>
              <p class="text-base">
                We use your personal information solely for the following purposes:
              </p>
              <p class="text-base">
                • To create and manage your user account<br />
                • To authenticate you when you access the Service<br />
                • To send you newsletters and updates (only if you have opted in)<br />
                • To respond to your inquiries and provide customer support
              </p>
            </div>
          </div>

          <div class="separator" />

          <div class="section-container flex">
            <div class="count">
              <img src={Count.src} alt="" />
              <p>006</p>
            </div>
            <div>
              <p class="large">Data Sharing and Third Parties</p>
              <p class="text-base">
                We do not sell, rent, or share your personal data with third parties, except:
              </p>
              <p class="text-base">
                <strong>Cloudflare:</strong> Our hosting provider, which may process your data as part of providing infrastructure services. Cloudflare is GDPR-compliant.
              </p>
              <p class="text-base">
                We do not use analytics tools, tracking cookies, or advertising networks.
              </p>
            </div>
          </div>
        </div>

        <div class="img-container">
          <!-- Add any decorative images here if needed -->
        </div>
      </div>

      <!-- Column 2 -->
      <div class="flex-1 parallax-column" data-speed="2">
        <div class="column-content">
          <div class="big-section">
            <p class="xtra-large">DATA MANAGEMENT</p>

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>007</p>
              </div>
              <div>
                <p class="large">Data Retention</p>
                <p class="text-base">
                  We retain your personal data for as long as:
                </p>
                <p class="text-base">
                  • You maintain an active account with us<br />
                  • The Service continues to operate<br />
                  • Required by law
                </p>
                <p class="text-base">
                  You may request deletion of your account and associated data at any time.
                </p>
              </div>
            </div>

            <div class="separator" />

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>008</p>
              </div>
              <div>
                <p class="large">Your Rights (GDPR)</p>
                <p class="text-base">
                  Under the GDPR, you have the following rights regarding your personal data:
                </p>
                <p class="text-base">
                  • <strong>Right of access:</strong> Request a copy of the personal data we hold about you<br />
                  • <strong>Right to rectification:</strong> Request correction of inaccurate or incomplete data<br />
                  • <strong>Right to erasure:</strong> Request deletion of your personal data ("right to be forgotten")<br />
                  • <strong>Right to data portability:</strong> Request your data in a structured, machine-readable format<br />
                  • <strong>Right to object:</strong> Object to processing of your data<br />
                  • <strong>Right to withdraw consent:</strong> Withdraw consent for newsletter communications at any time
                </p>
                <p class="text-base">
                  To exercise any of these rights, please contact us at contact@wavmap.org.
                </p>
              </div>
            </div>

            <div class="separator" />

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>009</p>
              </div>
              <div>
                <p class="large">Data Security</p>
                <p class="text-base">
                  We implement appropriate technical and organizational measures to protect your personal data against unauthorized access, alteration, disclosure, or destruction. Your data is hosted on Cloudflare's secure infrastructure.
                </p>
              </div>
            </div>

            <div class="separator" />

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>010</p>
              </div>
              <div>
                <p class="large">Cookies and Tracking</p>
                <p class="text-base">
                  We do not use cookies, analytics tools, or any tracking technologies on our Service.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="img-container">
          <!-- Add any decorative images here if needed -->
        </div>
      </div>

      <!-- Column 3 -->
      <div class="flex-1 parallax-column" data-speed="1">
        <div class="column-content">
          <div class="big-section">
            <p class="xtra-large">COMPLIANCE & CONTACT</p>

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>011</p>
              </div>
              <div>
                <p class="large">International Data Transfers</p>
                <p class="text-base">
                  Your data is hosted on Cloudflare's infrastructure, which may involve data processing in various locations. Cloudflare provides appropriate safeguards for international data transfers in compliance with GDPR.
                </p>
              </div>
            </div>

            <div class="separator" />

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>012</p>
              </div>
              <div>
                <p class="large">Children's Privacy</p>
                <p class="text-base">
                  Our Service is not intended for children under 16 years of age. We do not knowingly collect personal data from children under 16.
                </p>
              </div>
            </div>

            <div class="separator" />

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>013</p>
              </div>
              <div>
                <p class="large">Changes to This Privacy Policy</p>
                <p class="text-base">
                  We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.
                </p>
              </div>
            </div>

            <div class="separator" />

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>014</p>
              </div>
              <div>
                <p class="large">Contact Us</p>
                <p class="text-base">
                  If you have any questions about this Privacy Policy or wish to exercise your rights, please contact us at:
                </p>
                <p class="text-base">
                  <strong>Email:</strong> contact@wavmap.org
                </p>
              </div>
            </div>

            <div class="separator" />

            <div class="section-container flex">
              <div class="count">
                <img src={Count.src} alt="" />
                <p>015</p>
              </div>
              <div>
                <p class="large">Supervisory Authority</p>
                <p class="text-base">
                  If you are located in the European Economic Area, you have the right to lodge a complaint with your local data protection supervisory authority if you believe we have not complied with applicable data protection laws.
                </p>
                <p class="text-base">
                  <strong>Last Updated:</strong> September 30, 2025
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="img-container">
          <!-- Add any decorative images here if needed -->
        </div>
      </div>
    </div>
  </main>
  <Footer />
</Layout>

<script>
  function initParallax() {
    const parallaxColumns = document.querySelectorAll('.parallax-column');
    if (!parallaxColumns.length) return;

    function updateParallax() {
      const scrollTop = window.pageYOffset;
      const windowHeight = window.innerHeight;
      const documentHeight = document.documentElement.scrollHeight;
      const maxScroll = documentHeight - windowHeight;

      parallaxColumns.forEach(column => {
        const speed = parseFloat(column.dataset.speed) || 0;
        const content = column.querySelector('.column-content');

        // Constant parallax effect
        const yPos = scrollTop * speed * 0.8; // Effet constant : 80% du mouvement original

        // Cap only when really necessary to prevent excessive space
        const maxMovement = windowHeight * 0.4; // Max 0.4x viewport height
        const cappedYPos = Math.min(yPos, maxMovement);

        content.style.transform = `translateY(-${cappedYPos}px)`;
      });
    }

    // Throttled scroll handler
    let ticking = false;
    function handleScroll() {
      if (!ticking) {
        requestAnimationFrame(() => {
          updateParallax();
          ticking = false;
        });
        ticking = true;
      }
    }

    // Remove existing listeners to avoid duplicates
    window.removeEventListener('scroll', handleScroll);
    window.removeEventListener('resize', updateParallax);

    // Add listeners
    window.addEventListener('scroll', handleScroll, { passive: true });
    window.addEventListener('resize', updateParallax);

    // Initial call
    updateParallax();
  }

  // Initialize on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initParallax);
  } else {
    initParallax();
  }

  // Reinitialize on Astro page navigation
  document.addEventListener('astro:page-load', initParallax);
</script>

<style>
  #parallax-container {
    min-height: 0;
    height: auto;
    align-items: flex-start;
  }

  .parallax-column {
    padding: 1.5rem 1rem;
    overflow: visible;
    position: relative;
    height: auto;
    min-height: 0;
    flex-shrink: 0;
  }



  .parallax-column img {
    align-self: right;
    height: 60px;
  }

  .img-container {
    display: flex;
    align-items: end;
    justify-content: end;
    padding-top: 40vh;
  }

  .count {
    position: relative;
    display: inline-block;
  }

  .big-section {
    padding-top: 4rem;
    padding-bottom: 4rem;
  }

  .section-container {
    gap: 0.5rem;
  }

  .count img {
    width: 38px !important;
    min-width: 38px;
    display: block;
    object-fit: contain;
  }

  .count p {
    position: absolute;
    top: 11px;
    left: 20%;
    margin: 0;
    font-size: 12px;
    font-weight: bold;
  }

  .column-content {
    will-change: transform;
    padding-bottom: 1rem;
    height: fit-content;
    min-height: 0;
  }

  .parallax-column a {
    color: white;
    text-decoration: underline;
    font-weight: 500;
  }

  .separator {
    height: 2px;
    background: white;
    margin: 2rem 0;
    opacity: 0.3;
  }

  /* Keep your existing styles below */
  html, body {
    margin: 0;
    padding: 0;
    background-color: black !important;
  }

  body::-webkit-scrollbar {
    display: none;
  }

  .container {
    background-color: black;
    color: white;
    scrollbar-width: none;
    width: 100%;
    overflow-x: clip; /* Use clip instead of hidden to preserve sticky navbar */
    box-sizing: border-box;
  }

  .container::-webkit-scrollbar {
    display: none;
  }

  #parallax-container {
    position: relative;
  }

  .xtra-large {
    font-weight: 900;
    font-size: 28px;
  }

  p {
    padding: 10px 0;
    margin-right: 1rem;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }

  .large {
    font-weight: 800;
    font-size: 26px;
  }

  .separator {
    width: 100%;
    height: 1px;
    background-color: white;
    margin-top: 2.5rem;
    margin-bottom: 2.5rem;
  }

  .text-base a:hover {
    text-decoration: underline;
  }

  /* Responsive */
  @media (max-width: 768px) {
    #parallax-container {
      flex-direction: column;
    }

    .img-container {
      display: none;
    }

    .parallax-column {
      min-height: auto;
      padding: 1rem 0.5rem;
    }

    .column-content {
      padding-bottom: 0.5rem;
      transform: none !important;
    }

    p {
      margin-right: 0.5rem;
      font-size: 14px;
    }

    .xtra-large {
      font-size: 24px;
    }

    .large {
      font-size: 22px;
    }
  }
</style>